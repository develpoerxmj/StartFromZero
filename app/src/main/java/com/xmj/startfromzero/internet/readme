网络分层----5层结构

物理层：负责物理传输，将计算机连接起来的物理手段

数据链路层：在物理线路上进行数据的可靠传递

网络层：如何将数据从发送方路由到接收方

传输层：为主机上的应用程序提供端到端的通信（TCP协议——传输控制协议，UDP——用户数据报协议）

应用层：规定应用程序之间传递的数据格式

TCP报文格式：（见图片：TCP报文段格式）

重要字段：
    1、序号（sequence number）：Seq序号，占32位，用来标识从TCP源端向目的端发送的字节流，发起方发送数据时对其进行标识
    2、确认号（acknowledgement number）：Ack序号，占32位，只有ACK标识位为1时，确认序号字段才有效，Ack=Seq+1
    3、控制位：
        URG-紧急指针有效
        ACK-确认序号有效
        PSH-接收方尽快将这个报文交给应用层
        RET-重置连接
        SYN-发起一个新连接
        FIN-释放一个连接

TCP连接时，三次握手（见图three.png）
    1、客户端发送SYN报文（SYN标识位置1），设置seq = x，此时进入syn_send状态
    2、服务端收到报文，向客户端发送SYN+ACK报文（SYN和ACK标识位置1），seq = y，ack = x + 1，进入syn_rcvd状态
    3、客户端收到报文，向服务端发送ACK报文，seq = y + 1，进入established状态，服务端收到后也会进入established状态

    SYN报文段不能携带数据，但是会消耗一个序列号
    ACK报文段可以携带数据，但如果不携带数据则不消耗序列号
    FIN报文段即使不带数据，也会消耗一个序号

断开连接时，四次挥手（见图four.png）
    1、客户端发送FIN报文段，seq = n，此时进入FIN_WAIT_1状态
        n为客户端已传送数据最后一个字节的序号+1
    2、服务端收到报文段后，向客户端发送ACK报文段，ack = n + 1，此时进入CLOSE-WAIT，客户端收到确认后，进入FIN-WAIT-2状态
    3、服务端发送FIN报文段，seq = m，此时还必须加上ack = n + 1，此时进入LAST-ACK状态
        m为客户端已传送数据最后一个字节的序号+1
    4、客户端收到报文段，像服务端发送ACK报文段，ack = m + 1，seq = n + 1，此时进入TIME-WAIT，服务端收到确认后关闭连接，客户端等待2MSL（最大报文生存时间）后，关闭连接
